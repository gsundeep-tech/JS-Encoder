<!DOCTYPE html>
<html lang="en">

<head>
    <title>JSON Request/Response Encryption</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/core-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/sha256.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/enc-base64.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <script src="crypt.js"></script>
</head>

<body>
    <div class="jumbotron text-center">
        <h1>Encrypt the JSON request</h1>
        <p>Note: Encryption and Decryption should be done at both server and client side</p>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-sm-5">
                <h3>Plain JSON Request:</h3>
                <textarea class="form-control" rows="14" id="plainJSON"></textarea>
            </div>
            <div class="col-sm-2 text-center" style="padding-top: 150px; align-content: center; ">
                <br />
                <button type="button" class="btn btn-primary" onclick="encode(key)">Encode &#8594;</button>
                <br />
                <br />
                <button type="button" class="btn btn-primary" onclick="decode(key)">Decode &#8592;</button>
            </div>
            <div class="col-sm-5">
                <h3>Ecrypted JSON Request:</h3>
                <textarea class="form-control" rows="14" id="encryptedJSON"></textarea>
            </div>
        </div>
    </div>
    <div id="encode-error">Error while parsing/Encoding the JSON..</div>
    <div id="decode-error">Error while Decoding..</div>
    <script>
    var key = "secret";
    var tmpJSON = {
        "key 1": "Sample Text",
        "key 2": 123.11,
        "key 3": true
    }

    document.getElementById("plainJSON").value = JSON.stringify(tmpJSON, undefined, 4);

    /***
        obfuscated debug protection code..
        site : https://obfuscator.io/
    */

    var _0x1d86ac = function() {
        var _0xf5d707 = !![];
        return function(_0x58d198, _0xba243a) {
            var _0x4ba07b = _0xf5d707 ? function() {
                if (_0xba243a) {
                    var _0x1ec169 = _0xba243a['apply'](_0x58d198, arguments);
                    _0xba243a = null;
                    return _0x1ec169;
                }
            } : function() {};
            _0xf5d707 = ![];
            return _0x4ba07b;
        };
    }();
    (function() {
        _0x1d86ac(this, function() {
            var _0x238eca = new RegExp('function\x20*\x5c(\x20*\x5c)');
            var _0x14c4c7 = new RegExp('\x5c+\x5c+\x20*(?:_0x(?:[a-f0-9]){4,6}|(?:\x5cb|\x5cd)[a-z0-9]{1,4}(?:\x5cb|\x5cd))', 'i');
            var _0x174f8c = _0x47c039('init');
            if (!_0x238eca['test'](_0x174f8c + 'chain') || !_0x14c4c7['test'](_0x174f8c + 'input')) {
                _0x174f8c('0');
            } else {
                _0x47c039();
            }
        })();
    }());
    var a;
    setInterval(function() {
        _0x47c039();
    }, 0xfa0);

    function _0x47c039(_0x4328e3) {
        function _0x38d823(_0x1dbaff) {
            if (typeof _0x1dbaff === 'string') {
                return function(_0x46fe4b) {}['constructor']('while\x20(true)\x20{}')['apply']('counter');
            } else {
                if (('' + _0x1dbaff / _0x1dbaff)['length'] !== 0x1 || _0x1dbaff % 0x14 === 0x0) {
                    (function() {
                        return !![];
                    }['constructor']('debu' + 'gger')['call']('action'));
                } else {
                    (function() {
                        return ![];
                    }['constructor']('debu' + 'gger')['apply']('stateObject'));
                }
            }
            _0x38d823(++_0x1dbaff);
        }
        try {
            if (_0x4328e3) {
                return _0x38d823;
            } else {
                _0x38d823(0x0);
            }
        } catch (_0x41451a) {}
    }


    var dontExecute = true

    if (!dontExecute) {

        initDebugProtect();

        setInterval(function() {
            initDebugProtect();
        }, 0xfa0);

        function initDebugProtect() {
            try {
                DebugProtect();
            } catch (ex) {

            }
        }

        function DebugProtect() {

            (function() {
                return ![];
            }['constructor']('debu' + 'gger')['apply']('stateObject'));

            DebugProtect();
        }

    }
    </script>
</body>

</html>